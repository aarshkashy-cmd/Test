<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BOLTHEX | Management Console</title>
    <link rel="preconnect" href="https://unpkg.com">
    <link rel="dns-prefetch" href="https://api.github.com">
    
    <style>
        body { background: #050505; color: #fff; font-family: 'Inter', sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; margin: 0; }
        .admin-card { background: #111; border: 1px solid #222; padding: 40px; border-radius: 20px; width: 90%; max-width: 400px; box-shadow: 0 20px 50px rgba(0,0,0,0.5); text-align: center; }
        h1 { font-size: 1.5rem; letter-spacing: 2px; margin-bottom: 5px; color: #0ea5e9; }
        .status-dot { height: 8px; width: 8px; border-radius: 50%; display: inline-block; margin-right: 5px; background: #555; }
        .online { background: #22c55e; box-shadow: 0 0 10px #22c55e; }
        .status-text { font-size: 0.75rem; color: #666; text-transform: uppercase; margin-bottom: 25px; display: block; }
        input { width: 100%; padding: 12px; background: #000; border: 1px solid #333; border-radius: 8px; color: #fff; margin-bottom: 15px; box-sizing: border-box; text-align: center; }
        button { width: 100%; padding: 12px; background: #0ea5e9; border: none; border-radius: 8px; color: #fff; font-weight: 600; cursor: pointer; transition: 0.3s; }
        button:hover { background: #0284c7; }
        .hidden { display: none; }
        #debug-info { margin-top: 20px; font-size: 0.7rem; color: #444; }
    </style>
</head>
<body>

    <div id="login-screen" class="admin-card">
        <h1>BOLT<span style="font-weight:200">HEX</span></h1>
        <span class="status-text"><span id="dot" class="status-dot"></span> System Status: <span id="stat-label">Checking...</span></span>
        
        <input type="password" id="token-input" placeholder="Enter GitHub Token (ghp_...)">
        <button onclick="unlock()">Launch Dashboard</button>
        
        <div id="debug-info">
            Repo: aarshkashy-cmd/Test <br>
            Server: GitHub-API-v3
        </div>
    </div>

    <div id="nc-root" class="hidden"></div>

    <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>
    <script>
        // Check internet connection to GitHub
        fetch('https://api.github.com').then(() => {
            document.getElementById('dot').classList.add('online');
            document.getElementById('stat-label').innerText = 'Ready';
        }).catch(() => {
            document.getElementById('stat-label').innerText = 'Offline';
        });

        function unlock() {
            const token = document.getElementById('token-input').value;
            if (!token) return alert("Please enter your Master Key");

            localStorage.setItem('bolthex_key', token);
            document.getElementById('login-screen').style.display = 'none';
            document.getElementById('nc-root').classList.remove('hidden');

            window.CMS.init({
                config: {
                    backend: { name: "github", repo: "aarshkashy-cmd/Test", branch: "main", token: token },
                    media_folder: "photo",
                    public_folder: "photo",
                    collections: [{
                        name: "gallery",
                        label: "Bolthex Gallery",
                        folder: "photo",
                        create: true,
                        fields: [
                            {label: "Bolt Name", name: "title", widget: "string"},
                            {label: "Bolt Photo", name: "image", widget: "image"}
                        ]
                    }]
                }
            });
        }

        // Auto-fill token if saved
        const saved = localStorage.getItem('bolthex_key');
        if (saved) document.getElementById('token-input').value = saved;
    </script>
</body>
</html>
